<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Beauty Salon MISEMARU CLOUD | Demo</title>
  <meta name="description" content="Beauty Salon MISEMARU CLOUD ã®å–¶æ¥­ãƒ‡ãƒ¢ã‚µã‚¤ãƒˆ" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Noto+Sans:wght@400;500;600&family=Noto+Sans+JP:wght@400;500;600&family=Noto+Serif+JP:wght@400;500;600&display=swap" rel="stylesheet" />
  <style>
    :root { --bg:#070707; --text:#f4efdf; --gold:#d7b24a; --line:rgba(215,178,74,.28); }
    *{box-sizing:border-box}
    html,body{width:100%;max-width:100%;overflow-x:hidden}
    body{margin:0;background:var(--bg);color:var(--text);font-family:'Noto Sans', 'Noto Sans JP', sans-serif;line-height:1.8;-webkit-overflow-scrolling:touch}
    :lang(ja) body{font-family:'Noto Serif JP', serif}
    .hidden{display:none!important}
    .boot-mask{position:fixed;inset:0;z-index:305;background:#070707;opacity:1;transition:opacity .3s ease}
    .boot-mask.hide{opacity:0;pointer-events:none}

    .welcome{position:fixed;inset:0;z-index:320;display:flex;align-items:center;justify-content:center;min-height:92vh;padding:5rem 1.2rem 3rem;background:radial-gradient(circle at 20% 20%, rgba(215,178,74,.22), transparent 40%),#070707;transition:opacity .5s ease}
    .welcome.play{animation:welcomeHide .72s ease 2.1s forwards}
    .welcome.is-out{opacity:0;pointer-events:none}
    .welcome-inner{width:100%;max-width:760px;margin:0 auto;text-align:center;transform:translate3d(0,-86px,0)}
    .welcome-loading{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);display:grid;place-items:center;gap:12px;transition:opacity .3s ease}
    .welcome-loading-mark{width:min(200px,42vw);height:3px;border-radius:999px;background:rgba(215,178,74,.22);overflow:hidden}
    .welcome-loading-mark::after{content:"";display:block;width:45%;height:100%;border-radius:inherit;background:linear-gradient(90deg,rgba(215,178,74,.55) 0%,rgba(247,224,138,.88) 100%);animation:loaderSlide 1.18s ease-in-out infinite}
    .welcome-loading-text{margin:0;font-family:'Cinzel',serif;font-size:.8rem;font-weight:600;letter-spacing:.09em;color:rgba(245,240,226,.72);text-transform:uppercase}
    .welcome-inner{opacity:0;transition:opacity .3s ease}
    html.fonts-ready .welcome-inner{opacity:1}
    html.fonts-ready .welcome-loading{opacity:0;visibility:hidden}
    .welcome-sub,.welcome-title{opacity:0;transform:translateY(14px);transition:opacity .8s ease,transform .8s ease}
    .welcome.play .welcome-sub,.welcome.play .welcome-title{animation:welcomeUp .82s ease .08s forwards}
    .welcome-sub{margin:0 0 .65rem;color:var(--gold);letter-spacing:.13em;font-size:20px}
    .welcome-title{margin:.2rem 0 .95rem;color:#fff6dd;font-family:'Cinzel',serif}
    .welcome-line{opacity:0;transform:translateX(-24px);transition:opacity .9s ease,transform .9s ease;margin:1.15rem auto 0;max-width:620px;font-size:20px;color:rgba(245,240,226,.82)}
    .welcome.play .welcome-line{animation:welcomeLine .92s ease .48s forwards}
    @keyframes welcomeUp { to { opacity:1; transform:none; } }
    @keyframes welcomeLine { to { opacity:1; transform:none; } }
    @keyframes welcomeHide { to { opacity:0; visibility:hidden; pointer-events:none; } }
    @keyframes loaderSlide { 0% { transform:translateX(-110%);} 100% { transform:translateX(230%);} }
    body.welcome-lock{overflow:hidden}

    .lang-gate{
      position:fixed;inset:0;z-index:310;display:grid;place-items:center;
      background:#070707;backdrop-filter:blur(6px);
      opacity:0;visibility:hidden;pointer-events:none;
      transition:opacity .28s ease,visibility 0s linear .28s;
    }
    .lang-gate.show{
      opacity:1;visibility:visible;pointer-events:auto;
      transition:opacity .28s ease,visibility 0s;
    }
    .lang-card{
      width:min(680px,calc(100% - 1.6rem));padding:1.2rem;border:1px solid var(--line);border-radius:20px;
      background:linear-gradient(160deg,rgba(255,255,255,.08),rgba(15,15,15,.92));text-align:center;
      transform:translateY(12px) scale(.985);opacity:.92;
      transition:transform .3s cubic-bezier(.22,.9,.32,1),opacity .28s ease;
    }
    .lang-gate.show .lang-card{transform:translateY(0) scale(1);opacity:1}
    .lang-title{margin:.2rem 0 .6rem;font-family:'Cinzel',serif;color:#fff6de}
    .lang-loading{display:none;place-items:center;gap:10px;min-height:120px}
    .lang-gate.is-preparing .lang-loading{display:grid}
    .lang-gate.is-preparing .lang-content{display:none}
    .lang-gate.is-preparing .lang-card{
      width:auto;
      max-width:none;
      padding:0;
      border-color:transparent;
      background:transparent;
      box-shadow:none;
      transform:none;
      opacity:1;
    }
    .lang-loading-mark{width:min(180px,48vw);height:3px;border-radius:999px;background:rgba(215,178,74,.2);overflow:hidden}
    .lang-loading-mark::after{content:"";display:block;width:45%;height:100%;border-radius:inherit;background:linear-gradient(90deg,rgba(215,178,74,.55),rgba(247,224,138,.88));animation:loaderSlide 1.05s ease-in-out infinite}
    .lang-loading-text{margin:0;font-family:'Cinzel',serif;font-size:.76rem;letter-spacing:.08em;color:rgba(245,240,226,.7);text-transform:uppercase}
    .lang-actions{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.55rem}
    .lang-btn{border:1px solid rgba(255,236,186,.5);background:rgba(255,255,255,.05);color:#fff3cf;border-radius:999px;padding:.58rem .9rem;cursor:pointer;transition:transform .18s ease,background .2s ease,color .2s ease,border-color .2s ease,box-shadow .2s ease}
    .lang-btn:hover,.lang-btn:focus-visible{transform:translateY(-1px);border-color:rgba(255,236,186,.78);background:rgba(255,255,255,.11);box-shadow:0 8px 20px rgba(0,0,0,.24)}
    .lang-btn:active{transform:translateY(0) scale(.985)}
    .lang-btn.is-selecting{background:linear-gradient(135deg,#f5de8a,#d7b24a 52%,#b98a2f);color:#261b0c;border-color:rgba(255,236,186,.92);box-shadow:0 10px 22px rgba(0,0,0,.28)}

    .top-nav{position:fixed;top:0;left:0;right:0;z-index:200;background:linear-gradient(180deg,rgba(7,7,7,.86),rgba(7,7,7,.64));border-bottom:1px solid rgba(255,255,255,.08);backdrop-filter:blur(8px);transform:translateY(0);opacity:1;transition:transform .34s cubic-bezier(.22,.78,.22,1),opacity .24s ease}
    .top-nav.is-hidden{transform:translateY(calc(-100% - 10px));opacity:.01;pointer-events:none}
    .top-nav-inner{width:min(1160px,calc(100% - 1.2rem));margin:0 auto;display:grid;grid-template-columns:minmax(0,1fr) auto;align-items:center;gap:.8rem;padding:.45rem 0;position:relative}
    .brand{font-family:'Cinzel',serif;color:#fff4d2;letter-spacing:.08em;font-size:clamp(.78rem,1.7vw,1.03rem);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .menu-toggle{display:none;width:40px;height:36px;border-radius:10px;border:1px solid rgba(255,242,207,.4);background:rgba(255,255,255,.06);color:#f2ddab}
    .menu-toggle span{display:block;width:18px;height:2px;background:currentColor;border-radius:99px;margin:4px auto;transition:transform .22s ease,opacity .2s ease}
    .top-nav-right{display:flex;gap:.42rem;flex-wrap:wrap;justify-content:flex-end}
    .menu-link,.reserve-link{border:1px solid rgba(255,242,207,.35);background:rgba(255,255,255,.04);color:#f1ddad;border-radius:999px;padding:.32rem .66rem;font-size:.74rem;line-height:1.2;text-decoration:none;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;min-height:33px}
    .reserve-link{background:linear-gradient(135deg,#f5de8a,#d7b24a 52%,#b98a2f);color:#261b0c;font-weight:700}
    .lang-switch{position:relative}
    .lang-toggle{
      border:1px solid rgba(255,242,207,.35);
      background:rgba(255,255,255,.04);
      color:#f1ddad;
      border-radius:999px;
      padding:.32rem .66rem;
      font-size:.74rem;
      line-height:1.2;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      min-width:72px;
      min-height:33px;
      justify-content:center;
    }
    .lang-toggle .globe{font-size:.86em;line-height:1}
    .lang-card-head{display:flex;align-items:center;justify-content:space-between;gap:.6rem}
    .lang-close{
      width:34px;height:34px;border-radius:10px;
      border:1px solid rgba(255,241,204,.48);
      background:rgba(18,18,18,.72);color:#f6dfab;cursor:pointer;
      font-size:1.05rem;line-height:1;
    }
    .lang-close:hover,.lang-close:focus-visible{background:rgba(215,178,74,.2)}
    .lang-gate[data-mode="initial"] .lang-close{display:none}

    .hero{position:relative;overflow:hidden;min-height:92vh;display:flex;align-items:center;justify-content:center;padding:5rem 1.2rem 3rem}
    .hero-bg{position:absolute;inset:0;z-index:0;background-size:cover;background-position:center;opacity:0;transition:opacity 1.2s ease;will-change:opacity}
    .hero-bg.is-visible{opacity:1}
    .hero-copy{text-align:center;max-width:760px;position:relative;z-index:1}
    .hero-tag{color:var(--gold);font-family:'Cinzel',serif;letter-spacing:.13em;margin:0 0 .65rem;font-size:20px}
    .hero h1{font-family:'Cinzel',serif}
    .hero-lead{margin:1.15rem auto 0;color:rgba(245,240,226,.82);max-width:620px;font-size:20px}
    .hero-cta,.reserve-link{
      position:relative;
      overflow:hidden;
    }
    .hero-cta{
      margin-top:1.5rem;display:inline-flex;flex-direction:column;align-items:center;justify-content:center;gap:.44rem;padding:1rem 1.55rem .92rem;border-radius:999px;background:linear-gradient(135deg,#f5de8a,#d7b24a 52%,#b98a2f);color:#261b0c;text-decoration:none;font-weight:700;min-width:300px
    }
    .hero-cta-main{font-weight:700;line-height:1.1;font-size:20px}
    .hero-cta-sub{font-size:.92rem;line-height:1.12;opacity:.85;letter-spacing:.03em}
    .hero-cta::before,.reserve-link::before{
      content:"";
      position:absolute;
      top:0;left:-120%;
      width:72%;height:100%;
      background:linear-gradient(100deg,transparent,rgba(255,255,255,.48),transparent);
      transition:left .52s ease;
    }
    .hero-cta:hover::before,.hero-cta:focus::before,.reserve-link:hover::before,.reserve-link:focus::before{left:135%}

    .section{width:min(1160px,calc(100% - 1.4rem));margin:0 auto;padding:2.2rem 0}
    .title{
      font-family:'Cinzel','Noto Sans JP',serif;
      color:var(--gold);
      letter-spacing:.08em;
      margin:0 0 .75rem;
      font-size:clamp(1.4rem,2.7vw,2rem);
    }
    .brand,
    .hero-tag,
    .welcome-sub,
    .hero h1,
    .welcome-title,
    .title,
    .menu-item h3,
    .staff-card h3,
    #storeInfoTitle,
    #mapTitle,
    #ctaTitle {
      font-family:'Cinzel','Noto Sans JP',serif;
      font-weight:600;
      letter-spacing:.08em;
      line-height:1.15;
    }
    .hero-copy,
    .welcome-inner{
      width:100%;
      max-width:760px;
      margin:0 auto;
    }
    .hero h1,
    .welcome-title{
      font-size:clamp(2.1rem,5.5vw,4.2rem);
      margin:.2rem 0 .95rem;
      text-wrap:balance;
      word-break:keep-all;
      overflow-wrap:normal;
    }
    .title-line{display:block;white-space:nowrap}
    .hero h1 .title-line + .title-line,
    .welcome-title .title-line + .title-line{
      margin-top:.04em;
    }
    :lang(ja) .hero-tag,
    :lang(ja) .welcome-sub,
    :lang(ja) #storeInfoTitle,
    :lang(ja) #salonGallery .menu-item h3,
    :lang(ja) #menu .menu-item h3,
    :lang(ja) #staff .staff-card h3,
    :lang(ja) .menu-link,
    :lang(ja) .lang-toggle,
    :lang(ja) #navConcept,
    :lang(ja) #navFeatures,
    :lang(ja) #navMenu,
    :lang(ja) #navStaff,
    :lang(ja) #navStore {
      font-family:'Noto Serif JP',serif !important;
      letter-spacing:.02em;
      font-weight:500;
    }
    .panel{border:1px solid rgba(255,255,255,.09);border-radius:18px;background:linear-gradient(160deg,rgba(255,255,255,.04),rgba(10,10,10,.9));padding:1rem}

    .concept-grid{display:grid;grid-template-columns:1.1fr 1fr;gap:1rem;align-items:center}
    .concept-photo{width:100%;border-radius:14px;border:1px solid rgba(255,255,255,.12)}

    .grid4{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:.85rem}
    .feature-item,.menu-item,.staff-card{border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:.9rem;background:rgba(255,255,255,.03)}
    .feature-item{text-align:center}
    .feature-icon{width:100px;height:100px;object-fit:contain;display:block;margin:.35rem auto 0}
    .menu-item h3,.staff-card h3{margin:0;color:#fff5d6}
    .image-zoom-wrap{position:relative;margin:.5rem 0}
    .menu-item img{width:100%;aspect-ratio:3/2;object-fit:cover;border-radius:12px;border:1px solid rgba(255,255,255,.1);margin:0}
    #menu .menu-item{display:flex;flex-direction:column;height:100%}
    #menu .menu-desc{margin-bottom:.2rem}
    #salonGallery .menu-item img{cursor:zoom-in;transition:transform .24s ease,filter .24s ease}
    #salonGallery .menu-item img:hover,#salonGallery .menu-item img:focus-visible{transform:translateY(-1px);filter:brightness(1.05)}
    .salon-zoom-hint{position:absolute;top:10px;right:10px;width:30px;height:30px;border-radius:999px;display:grid;place-items:center;background:rgba(7,7,7,.6);border:1px solid rgba(255,241,204,.5);color:#f3dca8;pointer-events:none;backdrop-filter:blur(2px)}
    .salon-zoom-hint svg{width:16px;height:16px;display:block;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
    .menu-desc,.staff-role,.staff-desc{margin:.45rem 0 0;color:rgba(245,240,226,.82);font-size:.92rem}
    .menu-price{margin:.55rem 0 0;color:#f0d27e;font-family:'Cinzel','Noto Sans JP',serif;font-weight:600;letter-spacing:.04em}
    #menu .menu-price{margin-top:auto}
    .menu-detail-btn{margin-top:.72rem;width:100%;border:1px solid rgba(255,241,204,.45);background:rgba(255,255,255,.06);color:#f3ddad;border-radius:999px;padding:.48rem .85rem;font-size:.84rem;cursor:pointer;transition:transform .2s ease,background .2s ease,border-color .2s ease}
    .menu-detail-btn:hover,.menu-detail-btn:focus-visible{transform:translateY(-1px);background:rgba(255,255,255,.12);border-color:rgba(255,241,204,.8)}
    .menu-link:hover,.menu-link:focus-visible,
    .lang-toggle:hover,.lang-toggle:focus-visible{
      transform:translateY(-1px);
      background:rgba(255,255,255,.12);
      border-color:rgba(255,241,204,.8);
    }
    .staff-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:.85rem}
    .avatar{width:68px;height:68px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,#f5de8a,#d7b24a 52%,#b98a2f);color:#241a0d;font-family:'Cinzel',serif;font-weight:700;margin-bottom:.6rem}

    .store-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;align-items:stretch}
    .store-grid .panel{display:flex;flex-direction:column}
    .map{width:100%;height:auto;flex:1;min-height:320px;border:1px solid rgba(255,255,255,.1);border-radius:12px}
    .store-photo{width:100%;margin-top:.8rem;aspect-ratio:16/10;object-fit:cover;object-position:center 70%;border-radius:12px;border:1px solid rgba(255,255,255,.12);display:block}

    .cta{width:min(920px,calc(100% - 1.4rem));margin:0 auto 1.8rem;padding:1.2rem;border-radius:18px;border:1px solid var(--line);background:linear-gradient(135deg,rgba(215,178,74,.2),rgba(28,23,13,.76));text-align:center}
    .footer{width:min(1160px,calc(100% - 1.4rem));margin:0 auto 2rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,.12);text-align:center;color:rgba(245,240,226,.72);font-size:.82rem}
    .footer-sns{display:flex;justify-content:center;gap:.55rem;margin:.5rem 0 .3rem}
    .sns-link{width:36px;height:36px;border-radius:999px;border:1px solid rgba(255,241,204,.42);background:rgba(255,255,255,.04);color:#f1ddad;display:grid;place-items:center;transition:transform .2s ease,background .2s ease,border-color .2s ease}
    .sns-link:hover,.sns-link:focus-visible{transform:translateY(-1px);background:rgba(255,255,255,.11);border-color:rgba(255,241,204,.75)}
    .sns-link svg{width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:1.9;stroke-linecap:round;stroke-linejoin:round}
    html.modal-lock,body.modal-lock{overflow:hidden;overscroll-behavior:none;height:100%}
    body.modal-lock{position:fixed;left:0;right:0;width:100%;touch-action:pan-y}
    .image-lightbox{position:fixed;inset:0;z-index:460;display:grid;place-items:center;padding:1rem;background:rgba(5,5,5,.82);backdrop-filter:blur(6px);opacity:0;visibility:hidden;pointer-events:none;transition:opacity .22s ease,visibility 0s linear .22s;overscroll-behavior:contain}
    .image-lightbox.is-open{opacity:1;visibility:visible;pointer-events:auto;transition:opacity .22s ease,visibility 0s}
    .image-lightbox-frame{position:relative}
    .image-lightbox-img{width:min(980px,84vw);max-height:78vh;height:auto;border-radius:14px;border:1px solid rgba(255,255,255,.16);box-shadow:0 28px 56px rgba(0,0,0,.45);display:block;object-fit:contain}
    .image-lightbox-close{position:absolute;top:10px;right:10px;width:38px;height:38px;border-radius:10px;border:1px solid rgba(255,241,204,.52);background:rgba(18,18,18,.78);color:#f6dfab;font-size:1.2rem;line-height:1;cursor:pointer}
    .image-lightbox-close:hover,.image-lightbox-close:focus-visible{background:rgba(215,178,74,.2)}
    .image-lightbox-nav{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:999px;border:1px solid rgba(255,241,204,.45);background:rgba(12,12,12,.72);color:#f6dfab;font-size:1.35rem;line-height:1;display:grid;place-items:center;cursor:pointer}
    .image-lightbox-nav:hover,.image-lightbox-nav:focus-visible{background:rgba(215,178,74,.18)}
    .image-lightbox-nav.prev{left:10px}
    .image-lightbox-nav.next{right:10px}
    .treatment-modal{position:fixed;inset:0;z-index:470;display:grid;place-items:center;padding:max(12px,env(safe-area-inset-top)) 1rem max(12px,env(safe-area-inset-bottom));background:rgba(5,5,5,.78);backdrop-filter:blur(7px);opacity:0;visibility:hidden;pointer-events:none;transition:opacity .22s ease,visibility 0s linear .22s;overscroll-behavior:contain}
    .treatment-modal.is-open{opacity:1;visibility:visible;pointer-events:auto;transition:opacity .22s ease,visibility 0s}
    .treatment-modal-card{position:relative;width:min(760px,94vw);max-height:min(88vh,calc(100dvh - 2rem - env(safe-area-inset-top) - env(safe-area-inset-bottom)));overflow:auto;border-radius:16px;border:1px solid rgba(255,255,255,.14);background:linear-gradient(165deg,rgba(20,20,20,.96),rgba(10,10,10,.95));box-shadow:0 24px 54px rgba(0,0,0,.45);padding:1rem 1rem 1.15rem}
    .modal-scroll-area{overscroll-behavior:none;overscroll-behavior-y:none;-webkit-overflow-scrolling:touch;touch-action:pan-y;overflow-y:auto}
    .treatment-modal-close{position:absolute;top:10px;right:10px;width:38px;height:38px;border-radius:10px;border:1px solid rgba(255,241,204,.52);background:rgba(18,18,18,.78);color:#f6dfab;font-size:1.2rem;line-height:1;cursor:pointer}
    .treatment-modal-close:hover,.treatment-modal-close:focus-visible{background:rgba(215,178,74,.2)}
    .treatment-modal-kicker{margin:0;color:#d8b556;font-family:'Cinzel',serif;font-size:.72rem;letter-spacing:.16em;text-transform:uppercase}
    .treatment-modal-title{margin:.28rem 0 .2rem;color:#fff2ce;font-family:'Noto Serif JP','Cinzel',serif;font-size:1.35rem;line-height:1.35}
    .treatment-modal-cat{margin:0 0 .75rem;color:rgba(245,240,226,.82);font-family:'Cinzel',serif;letter-spacing:.1em;font-size:.78rem}
    .treatment-modal-layout{display:grid;grid-template-columns:minmax(310px,1.14fr) minmax(0,.86fr);gap:.65rem;align-items:start}
    .treatment-modal-media img{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:12px;border:1px solid rgba(255,255,255,.14)}
    .treatment-modal-intro{margin:.55rem 0 0;color:rgba(245,240,226,.88);font-size:.92rem;line-height:1.82}
    .treatment-modal-body{color:rgba(245,240,226,.88);font-size:.93rem;line-height:1.9}
    .treatment-modal-body h4{margin:.75rem 0 .2rem;color:#f4d88e;font-family:'Noto Serif JP','Cinzel',serif;font-size:1rem}
    .treatment-modal-body h4:first-child{margin-top:0}
    @media (min-width:992px){
      .treatment-modal-body{padding-left:.95rem}
    }
    .treatment-modal-body ul{margin:.1rem 0 .4rem;padding-left:1.05rem}
    .treatment-modal-body ul.price-list{padding-left:1.05rem;margin:.15rem 0 .35rem}
    .treatment-modal-body ul.price-list li{list-style:disc}
    .treatment-modal-body .price-time{white-space:nowrap}
    .treatment-modal-body ul.price-list .price-time{display:inline-block;width:66px}
    .treatment-modal-body .price-amount{
      white-space:nowrap;
      font-variant-numeric:tabular-nums;
      font-feature-settings:"tnum" 1;
    }
    @media (max-width:991.98px){
      .image-lightbox-img{width:min(700px,90vw);max-height:68vh}
      .image-lightbox-close{top:8px;right:8px;width:34px;height:34px}
      .image-lightbox-nav{width:38px;height:38px}
      .image-lightbox-nav.prev{left:8px}
      .image-lightbox-nav.next{right:8px}
      .treatment-modal{padding:max(8px,env(safe-area-inset-top)) .52rem max(8px,env(safe-area-inset-bottom))}
      .treatment-modal-card{padding:.95rem .82rem 1rem;max-height:calc(100dvh - 1rem - env(safe-area-inset-top) - env(safe-area-inset-bottom))}
      .treatment-modal-title{font-size:1.18rem;padding-right:2.1rem}
      .treatment-modal-layout{grid-template-columns:1fr;gap:.7rem}
    }

    .reveal{opacity:1;transform:none}
    .will-reveal{opacity:0;transform:translateY(16px);transition:opacity .62s ease,transform .62s ease}
    .will-reveal.on{opacity:1;transform:none}

    .feature-item,.menu-item,.staff-card{opacity:1;transform:none}
    .feature-item.fx-hidden{opacity:0;transform:translateY(14px)}
    .feature-item.fx-show{opacity:1;transform:none;transition:opacity .82s ease,transform .82s cubic-bezier(.22,.9,.32,1)}
    .menu-item.fx-hidden{opacity:0;transform:translateY(16px)}
    .menu-item.fx-show{opacity:1;transform:none;transition:opacity .72s ease,transform .72s cubic-bezier(.22,.9,.32,1)}
    @media (max-width:991.98px){
      .staff-card.fx-hidden-left{opacity:0;transform:translateX(-34px)}
      .staff-card.fx-hidden-right{opacity:0;transform:translateX(34px)}
      .staff-card.fx-show{opacity:1;transform:none;transition:opacity .96s ease,transform .96s cubic-bezier(.22,.9,.32,1)}
    }

    @media (max-width:991.98px){
      html,body{overflow-x:hidden !important}
      .hero h1,
      .welcome-title{
        font-size:clamp(1.68rem,7.5vw,2.2rem);
      }
      .hero h1,
      .welcome-title{
        max-width:none;
        margin-left:auto;
        margin-right:auto;
      }
      .concept-grid,.store-grid{grid-template-columns:1fr}
      #salonGallery.section{width:min(1160px,calc(100% - .9rem))}
      .grid4{grid-template-columns:repeat(2,minmax(0,1fr))}
      .staff-grid{grid-template-columns:1fr}
      #staff .staff-card:nth-child(2) .avatar{margin-left:auto;margin-right:0}
      #staff .staff-card:nth-child(2) #s2Name,
      #staff .staff-card:nth-child(2) #s2Role{text-align:right}
      .welcome-inner{transform:translate3d(0,-50px,0)}
      .menu-toggle{display:inline-block}
      .top-nav-right{
        position:absolute;
        top:calc(100% + 8px);
        right:0;
        width:max-content;
        max-width:calc(100vw - 0.8rem);
        display:grid;
        align-items:stretch;
        gap:0.5rem;
        border-radius:14px;
        border:1px solid var(--line);
        background:linear-gradient(165deg, rgba(20, 20, 20, 0.95), rgba(10, 10, 10, 0.92));
        box-shadow:0 16px 36px rgba(0,0,0,.42);
        padding:0.6rem;
        z-index:210;
        opacity:0;
        transform:translateY(-10px);
        visibility:hidden;
        pointer-events:none;
        transition:opacity 0.24s ease, transform 0.28s ease, visibility 0s linear 0.28s;
      }
      .top-nav.is-mobile-open .top-nav-right{
        opacity:1;
        transform:translateY(0);
        visibility:visible;
        pointer-events:auto;
        transition:opacity 0.24s ease, transform 0.28s ease, visibility 0s;
      }
      .top-nav.is-mobile-open .menu-toggle span:nth-child(1){transform:translateY(6px) rotate(45deg)}
      .top-nav.is-mobile-open .menu-toggle span:nth-child(2){opacity:0}
      .top-nav.is-mobile-open .menu-toggle span:nth-child(3){transform:translateY(-6px) rotate(-45deg)}
      .top-nav-right .menu-link,
      .top-nav-right .reserve-link{
        width:auto;
        min-width:240px;
        display:block;
        text-align:left;
        padding:.62rem .95rem;
        border-radius:999px;
        font-size:.88rem;
      }
      .top-nav-right .lang-toggle{
        width:auto;
        min-width:240px;
        display:block;
        text-align:left;
        padding:.62rem .95rem;
        border-radius:999px;
        font-size:.88rem;
      }
    }
    @media (max-width:575.98px){ .lang-actions{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div id="bootMask" class="boot-mask" aria-hidden="true"></div>
  <div id="welcome" class="welcome" aria-hidden="true">
    <div class="welcome-loading" id="welcomeLoading">
      <span class="welcome-loading-mark"></span>
      <p class="welcome-loading-text">Loading</p>
    </div>
    <div class="welcome-inner">
      <p id="w-sub" class="welcome-sub">é«˜ç´šã‚¨ã‚¹ãƒ†ã‚µãƒ­ãƒ³</p>
      <h1 id="w-title" class="welcome-title"><span class="title-line">Beauty Salon</span><span class="title-line">MISEMARU CLOUD</span></h1>
      <p id="w-line" class="welcome-line">ã‚ãªãŸã®ç¾ã—ã•ã‚’ã€é™ã‹ã«å¼•ãå‡ºã™</p>
    </div>
  </div>

  <div id="langGate" class="lang-gate" role="dialog" aria-modal="true">
    <div class="lang-card">
      <div class="lang-loading" aria-hidden="true">
        <span class="lang-loading-mark"></span>
        <p class="lang-loading-text">Loading</p>
      </div>
      <div class="lang-content">
        <div class="lang-card-head">
          <h2 id="lang-title" class="lang-title">Select language</h2>
          <button id="langGateClose" class="lang-close" type="button" aria-label="Close language picker">Ã—</button>
        </div>
        <div class="lang-actions">
          <button class="lang-btn" data-lang="ja">æ—¥æœ¬èª</button>
          <button class="lang-btn" data-lang="en">English</button>
          <button class="lang-btn" data-lang="zh-TW">ç¹é«”ä¸­æ–‡</button>
          <button class="lang-btn" data-lang="es">EspaÃ±ol</button>
          <button class="lang-btn" data-lang="ko">í•œêµ­ì–´</button>
        </div>
      </div>
    </div>
  </div>

  <nav id="topNav" class="top-nav">
    <div class="top-nav-inner">
      <div class="brand" id="navBrand">Beauty Salon MISEMARU CLOUD</div>
      <button id="menuToggle" class="menu-toggle" type="button" aria-expanded="false" aria-controls="menuPanel" aria-label="menu">
        <span></span><span></span><span></span>
      </button>
      <div id="menuPanel" class="top-nav-right">
        <button class="menu-link" type="button" data-scroll="concept" id="navConcept">ã‚³ãƒ³ã‚»ãƒ—ãƒˆ</button>
        <button class="menu-link" type="button" data-scroll="features" id="navFeatures">ç‰¹å¾´</button>
        <button class="menu-link" type="button" data-scroll="menu" id="navMenu">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</button>
        <button class="menu-link" type="button" data-scroll="staff" id="navStaff">ã‚¹ã‚¿ãƒƒãƒ•</button>
        <button class="menu-link" type="button" data-scroll="store" id="navStore">åº—èˆ—æƒ…å ±</button>
        <a class="reserve-link" id="navReserve" href="https://misemaru.cloud/jp/beauty_salon_misemaru_cloud/">äºˆç´„ã™ã‚‹</a>
        <div id="navLangSwitch" class="lang-switch">
          <button id="navLangToggle" class="lang-toggle" type="button" aria-label="Language">
            <span class="globe" aria-hidden="true">ğŸŒ</span>
            <span id="navLangCurrent">JP</span>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <header class="hero reveal" id="hero">
    <div class="hero-bg is-visible" id="heroBgA" aria-hidden="true"></div>
    <div class="hero-bg" id="heroBgB" aria-hidden="true"></div>
    <div class="hero-copy">
      <p id="heroTag" class="hero-tag">é«˜ç´šã‚¨ã‚¹ãƒ†ã‚µãƒ­ãƒ³</p>
      <h1 id="heroTitle"><span class="title-line">Beauty Salon</span><span class="title-line">MISEMARU CLOUD</span></h1>
      <p id="heroLead" class="hero-lead">ã‚ãªãŸã®ç¾ã—ã•ã‚’ã€é™ã‹ã«å¼•ãå‡ºã™</p>
      <a id="heroReserve" class="hero-cta" href="https://misemaru.cloud/jp/beauty_salon_misemaru_cloud/"><span id="heroReserveLabel" class="hero-cta-main">äºˆç´„ã™ã‚‹</span><span id="heroReserveSub" class="hero-cta-sub">24æ™‚é–“ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å—ä»˜</span></a>
    </div>
  </header>

  <section id="concept" class="section reveal">
    <div class="panel concept-grid">
      <div>
        <h2 class="title" id="conceptTitle">Salon Concept</h2>
        <p id="conceptBody">é™å¯‚ã¨ä¸Šè³ªã«åŒ…ã¾ã‚ŒãŸç©ºé–“ã§ã€è‚Œã¨å¿ƒã«å¯„ã‚Šæ·»ã†ãƒ©ã‚°ã‚¸ãƒ¥ã‚¢ãƒªãƒ¼ã‚¨ã‚¹ãƒ†ã‚’ã”æä¾›ã—ã¾ã™ã€‚</p>
        <ul style="margin:.9rem 0 0;padding-left:1.1rem">
          <li id="conceptItem1">å®Œå…¨å€‹å®¤ã§ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆæ–½è¡“</li>
          <li id="conceptItem2">æœ€æ–°ç¾å®¹æ©Ÿå™¨ã‚’å°å…¥ã—ãŸãƒ•ã‚§ã‚¤ã‚·ãƒ£ãƒ«ã‚±ã‚¢</li>
          <li id="conceptItem3">ãƒ›ãƒ†ãƒ«ã‚¹ãƒ‘å“è³ªã®ç©ºé–“è¨­è¨ˆ</li>
          <li id="conceptItem4">ãƒ–ãƒ©ã‚¤ãƒ€ãƒ«å¯¾å¿œã®é›†ä¸­ãƒ—ãƒ­ã‚°ãƒ©ãƒ </li>
        </ul>
      </div>
      <img class="concept-photo" src="https://images.unsplash.com/photo-1503236823255-94609f598e71?auto=format&fit=crop&w=1400&q=80" alt="ã‚µãƒ­ãƒ³å€‹å®¤" loading="lazy" decoding="async" />
    </div>
  </section>

  <section id="features" class="section reveal">
    <h2 class="title" id="featuresTitle">Our Strengths</h2>
    <div class="grid4">
      <article class="feature-item"><p id="f1">âœ¦ å®Œå…¨äºˆç´„åˆ¶</p><img class="feature-icon" src="./images/icon_reserve.png" alt="å®Œå…¨äºˆç´„åˆ¶" /></article>
      <article class="feature-item"><p id="f2">âœ¦ å¥³æ€§å°‚ç”¨</p><img class="feature-icon" src="./images/icon_only_lady.png" alt="å¥³æ€§å°‚ç”¨" /></article>
      <article class="feature-item"><p id="f3">âœ¦ ãƒ›ãƒ†ãƒ«ã‚¹ãƒ‘å“è³ª</p><img class="feature-icon" src="./images/icon_quality.png" alt="ãƒ›ãƒ†ãƒ«ã‚¹ãƒ‘å“è³ª" /></article>
      <article class="feature-item"><p id="f4">âœ¦ å¤œ21æ™‚ã¾ã§å–¶æ¥­</p><img class="feature-icon" src="./images/icon_business_hours.png" alt="å–¶æ¥­æ™‚é–“" /></article>
    </div>
  </section>

  <section id="salonGallery" class="section reveal">
    <h2 class="title" id="galleryTitle">Salon Interior</h2>
    <p id="galleryLead" style="margin:.12rem 0 .95rem;color:rgba(245,240,226,.8)">ä¸Šè³ªãªãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆç©ºé–“ã‚’ã€æ–½è¡“ã‚·ãƒ¼ãƒ³ã«åˆã‚ã›ã¦ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚</p>
    <div class="grid4">
      <article class="menu-item">
        <h3 id="galleryCardTitle1">æ–½è¡“ãƒ™ãƒƒãƒ‰â‘ </h3>
        <div class="image-zoom-wrap"><img src="./images/salon-concept-optimized/treatment-bed-1.webp" alt="æ–½è¡“ãƒ™ãƒƒãƒ‰" loading="lazy" decoding="async" /><span class="salon-zoom-hint" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="10" cy="10" r="6"></circle><path d="M10 7v6"></path><path d="M7 10h6"></path><path d="M14.5 14.5L20 20"></path></svg></span></div>
        <p id="galleryCap1" class="menu-desc">é™ã‹ãªå€‹å®¤ã§ã€æ·±ããƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹æ–½è¡“ç©ºé–“ã§ã™ã€‚</p>
      </article>
      <article class="menu-item">
        <h3 id="galleryCardTitle2">Waiting Lounge</h3>
        <div class="image-zoom-wrap"><img src="./images/salon-concept-optimized/waiting-lounge.webp" alt="å¾…åˆãƒ©ã‚¦ãƒ³ã‚¸" loading="lazy" decoding="async" /><span class="salon-zoom-hint" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="10" cy="10" r="6"></circle><path d="M10 7v6"></path><path d="M7 10h6"></path><path d="M14.5 14.5L20 20"></path></svg></span></div>
        <p id="galleryCap2" class="menu-desc">ã”æ¥åº—ã‹ã‚‰æ–½è¡“å‰ã¾ã§ã€ä¸Šè³ªã«éã”ã›ã‚‹å¯›ãã®ç©ºé–“ã§ã™ã€‚</p>
      </article>
      <article class="menu-item">
        <h3 id="galleryCardTitle3">Powder Room</h3>
        <div class="image-zoom-wrap"><img src="./images/salon-concept-optimized/powder-room.webp" alt="ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒ«ãƒ¼ãƒ " loading="lazy" decoding="async" /><span class="salon-zoom-hint" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="10" cy="10" r="6"></circle><path d="M10 7v6"></path><path d="M7 10h6"></path><path d="M14.5 14.5L20 20"></path></svg></span></div>
        <p id="galleryCap3" class="menu-desc">æ–½è¡“å¾Œã®ãŠç›´ã—ã¾ã§ç¾ã—ãæ•´ãˆã‚‰ã‚Œã‚‹å°‚ç”¨ã‚¹ãƒšãƒ¼ã‚¹ã§ã™ã€‚</p>
      </article>
      <article class="menu-item">
        <h3 id="galleryCardTitle4">æ–½è¡“ãƒ™ãƒƒãƒ‰â‘¡</h3>
        <div class="image-zoom-wrap"><img src="./images/salon-concept-optimized/treatment-bed-2.webp" alt="æ–½è¡“ãƒ™ãƒƒãƒ‰" loading="lazy" decoding="async" /><span class="salon-zoom-hint" aria-hidden="true"><svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="10" cy="10" r="6"></circle><path d="M10 7v6"></path><path d="M7 10h6"></path><path d="M14.5 14.5L20 20"></path></svg></span></div>
        <p id="galleryCap4" class="menu-desc">ãƒ–ãƒ©ã‚¤ãƒ€ãƒ«ã‚±ã‚¢ã«ã‚‚å¯¾å¿œã™ã‚‹è½ã¡ç€ã„ãŸå®Œå…¨å€‹å®¤ã§ã™ã€‚</p>
      </article>
    </div>
  </section>

  <section id="menu" class="section reveal">
    <h2 class="title" id="menuTitle">Treatment Menu</h2>
    <div class="grid4">
      <article class="menu-item"><h3 id="menuItemTitle1">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ•ã‚§ã‚¤ã‚·ãƒ£ãƒ«</h3><div class="image-zoom-wrap"><img src="./images/service-optimized/premium-facial.jpg" alt="Premium Facial" /></div><p id="m1" class="menu-desc">è‚Œåˆ†æã«åŸºã¥ãã‚ªãƒ¼ãƒ€ãƒ¼ãƒ¡ã‚¤ãƒ‰ãƒ•ã‚§ã‚¤ã‚·ãƒ£ãƒ«ã€‚é€æ˜æ„Ÿã¨ãƒãƒªã‚’å¼•ãå‡ºã—ã¾ã™ã€‚</p><p id="menuPrice1" class="menu-price">Â¥14,000~</p><button id="menuDetailBtn1" class="menu-detail-btn" type="button" data-treatment="premium-facial">è©³ç´°ã‚’è¦‹ã‚‹</button></article>
      <article class="menu-item"><h3 id="menuItemTitle2">ãƒœãƒ‡ã‚£ãƒˆãƒªãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ</h3><div class="image-zoom-wrap"><img src="./images/service-optimized/body-treatment.jpg" alt="Body Treatment" /></div><p id="m2" class="menu-desc">æ·±éƒ¨ã®ç–²ã‚Œã‚’è§£ãã»ãã™å…¨èº«ãƒˆãƒªãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆã€‚ã‚ãã‚Šã‚’æ•´ãˆè»½ã‚„ã‹ãªèº«ä½“ã¸ã€‚</p><p id="menuPrice2" class="menu-price">Â¥16,000~</p><button id="menuDetailBtn2" class="menu-detail-btn" type="button" data-treatment="body-treatment">è©³ç´°ã‚’è¦‹ã‚‹</button></article>
      <article class="menu-item"><h3 id="menuItemTitle3">ãƒ–ãƒ©ã‚¤ãƒ€ãƒ«ã‚³ãƒ¼ã‚¹</h3><div class="image-zoom-wrap"><img src="./images/service-optimized/bridal-course.jpg" alt="Bridal Course" /></div><p id="m3" class="menu-desc">æŒ™å¼ã«å‘ã‘ã¦è‚Œãƒ»ãƒœãƒ‡ã‚£ãƒ©ã‚¤ãƒ³ã‚’æ•´ãˆã‚‹çŸ­æœŸé›†ä¸­ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã™ã€‚</p><p id="menuPrice3" class="menu-price">Â¥28,000~</p><button id="menuDetailBtn3" class="menu-detail-btn" type="button" data-treatment="bridal-course">è©³ç´°ã‚’è¦‹ã‚‹</button></article>
      <article class="menu-item"><h3 id="menuItemTitle4">ãƒªãƒ©ã‚¯ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒ©ãƒ”ãƒ¼</h3><div class="image-zoom-wrap"><img src="./images/service-optimized/relaxation-therapy.jpg" alt="Relaxation Therapy" /></div><p id="m4" class="menu-desc">ã‚¢ãƒ­ãƒã¨æ‰‹æŠ€ã‚’çµ„ã¿åˆã‚ã›ãŸç™’ã—ã®ã‚³ãƒ¼ã‚¹ã€‚å¿ƒèº«ã®ç·Šå¼µã‚’é™ã‹ã«ã‚ªãƒ•ã—ã¾ã™ã€‚</p><p id="menuPrice4" class="menu-price">Â¥12,000~</p><button id="menuDetailBtn4" class="menu-detail-btn" type="button" data-treatment="relaxation-therapy">è©³ç´°ã‚’è¦‹ã‚‹</button></article>
    </div>
  </section>

  <section id="staff" class="section reveal">
    <h2 class="title" id="staffTitle">Our Specialists</h2>
    <div class="staff-grid">
      <article class="staff-card"><div class="avatar">AY</div><h3 id="s1Name">Ayaka Yamamoto</h3><p id="s1Role" class="staff-role">Chief Esthetician</p><p id="s1Desc" class="staff-desc">ãƒ•ã‚§ã‚¤ã‚·ãƒ£ãƒ«å°‚é–€ã€‚è‚ŒçŠ¶æ…‹ã«åˆã‚ã›ãŸç¹Šç´°ãªã‚±ã‚¢ã§é€æ˜æ„Ÿã‚’å¼•ãå‡ºã—ã¾ã™ã€‚ãŠå®¢æ§˜ä¸€äººã²ã¨ã‚Šã®è‚Œã¨ä¸å¯§ã«å‘ãåˆã„ã€å®‰å¿ƒã—ã¦ä»»ã›ã¦ã„ãŸã ã‘ã‚‹æ–½è¡“ã‚’å¿ƒãŒã‘ã¦ã„ã¾ã™ã€‚</p></article>
      <article class="staff-card"><div class="avatar">MN</div><h3 id="s2Name">Mio Nakahara</h3><p id="s2Role" class="staff-role">Body Therapist</p><p id="s2Desc" class="staff-desc">ãƒœãƒ‡ã‚£ãƒ©ã‚¤ãƒ³ã¨å·¡ã‚Šã‚’æ•´ãˆã‚‹æ–½è¡“ã‚’æ‹…å½“ã€‚æ·±ã„ãƒªãƒ©ã‚¯ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã¸å°ãã¾ã™ã€‚æ—¥å¸¸ã®ç–²ã‚Œã‚’å¿˜ã‚Œã‚‰ã‚Œã‚‹ã‚ˆã†ãªã€é™ã‹ã§å¿ƒåœ°ã‚ˆã„æ™‚é–“ã‚’å¤§åˆ‡ã«ã—ã¦ã„ã¾ã™ã€‚</p></article>
      <article class="staff-card"><div class="avatar">RK</div><h3 id="s3Name">Rina Kudo</h3><p id="s3Role" class="staff-role">Bridal Specialist</p><p id="s3Desc" class="staff-desc">ãƒ–ãƒ©ã‚¤ãƒ€ãƒ«ã‚±ã‚¢å°‚ä»»ã€‚æŒ™å¼å½“æ—¥ã«å‘ã‘ã¦æœ€é©ãªãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚å¤§åˆ‡ãªä¸€æ—¥ã‚’æœ€é«˜ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã§è¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã€ç´°ã‚„ã‹ãªã‚µãƒãƒ¼ãƒˆã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚</p></article>
    </div>
  </section>

  <section id="store" class="section reveal">
    <h2 class="title" id="storeTitle">Salon Information</h2>
    <div class="store-grid">
      <div class="panel">
        <h3 id="storeInfoTitle" style="margin:0 0 .6rem">åº—èˆ—æƒ…å ±</h3>
        <ul style="margin:0;padding-left:1.1rem">
          <li id="storeAddress">ä½æ‰€ï¼šã€’100-0001 æ±äº¬éƒ½åƒä»£ç”°åŒºä¸¸ã®å†…1-2-3</li>
          <li id="storeHours">å–¶æ¥­æ™‚é–“ï¼š10:00 - 21:00ï¼ˆæœ€çµ‚å—ä»˜ 19:30ï¼‰</li>
          <li id="storeAccess">ã‚¢ã‚¯ã‚»ã‚¹ï¼šJRæ±äº¬é§… å¾’æ­©5åˆ† / åœ°ä¸‹é‰„å¤§æ‰‹ç”ºé§… å¾’æ­©3åˆ†</li>
          <li id="storeTel">TELï¼š03-1234-5678</li>
        </ul>
        <img class="store-photo" src="./images/information/salon-entrance.webp" alt="ã‚µãƒ­ãƒ³å…¥å£" loading="lazy" decoding="async" />
      </div>
      <div class="panel">
        <h3 id="mapTitle" style="margin:0 0 .6rem">Google Map</h3>
        <iframe class="map" title="map" src="https://www.google.com/maps?q=Tokyo%20Station&output=embed" loading="lazy"></iframe>
      </div>
    </div>
  </section>

  <section class="cta reveal">
    <h2 id="ctaTitle" style="margin:0 0 .45rem;font-family:'Cinzel',serif">ã”äºˆç´„ã¯ã“ã¡ã‚‰</h2>
    <p id="ctaBody" style="margin:0 0 .9rem;color:rgba(245,240,226,.84);white-space:pre-line">æ–½è¡“ã®ã”äºˆç´„ã¯ã€
å°‚ç”¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„ã‚·ã‚¹ãƒ†ãƒ ã‚ˆã‚Š
24æ™‚é–“å—ã‘ä»˜ã‘ã¦ãŠã‚Šã¾ã™ã€‚</p>
    <a id="ctaReserve" class="hero-cta" href="https://misemaru.cloud/jp/beauty_salon_misemaru_cloud/"><span id="ctaReserveLabel" class="hero-cta-main">äºˆç´„ã™ã‚‹</span><span id="ctaReserveSub" class="hero-cta-sub">24æ™‚é–“ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å—ä»˜</span></a>
  </section>

  <footer class="footer">
    <p id="footerBrand" style="margin:.2rem 0">Beauty Salon MISEMARU CLOUD | Luxury Esthetic & Bridal Care</p>
    <div class="footer-sns" aria-label="SNS links">
      <a class="sns-link" href="#" aria-label="Instagram"><svg viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="4"></rect><circle cx="12" cy="12" r="3.5"></circle><circle cx="17.3" cy="6.7" r="0.8" fill="currentColor" stroke="none"></circle></svg></a>
      <a class="sns-link" href="#" aria-label="X"><svg viewBox="0 0 24 24"><path d="M5 5l14 14"></path><path d="M19 5L5 19"></path></svg></a>
      <a class="sns-link" href="#" aria-label="LINE"><svg viewBox="0 0 24 24"><path d="M5 9c0-3 3-5 7-5s7 2 7 5-3 5-7 5h-1.5L8 17v-3C6.2 13.5 5 11.4 5 9z"></path></svg></a>
    </div>
    <p id="footerAddress" style="margin:.2rem 0">ã€’100-0001 æ±äº¬éƒ½åƒä»£ç”°åŒºä¸¸ã®å†…1-2-3 / TEL 03-1234-5678</p>
    <p id="footerCredit" style="margin:.6rem 0 0">Produced by Nakayama Works</p>
  </footer>

  <div id="treatmentModal" class="treatment-modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="treatment-modal-card modal-scroll-area">
      <button id="treatmentModalClose" class="treatment-modal-close" type="button" aria-label="Close">Ã—</button>
      <p id="treatmentModalKicker" class="treatment-modal-kicker">SIGNATURE TREATMENT</p>
      <h3 id="treatmentModalTitle" class="treatment-modal-title">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ•ã‚§ã‚¤ã‚·ãƒ£ãƒ«</h3>
      <p id="treatmentModalCategory" class="treatment-modal-cat">FACIAL CARE</p>
      <div class="treatment-modal-layout">
        <div class="treatment-modal-media">
          <img id="treatmentModalImage" src="./images/service-optimized/premium-facial.jpg" alt="Premium Facial" />
          <p id="treatmentModalIntro" class="treatment-modal-intro"></p>
        </div>
        <div id="treatmentModalBody" class="treatment-modal-body"></div>
      </div>
    </div>
  </div>
  <div id="imageLightbox" class="image-lightbox" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="image-lightbox-frame">
      <button id="imageLightboxPrev" class="image-lightbox-nav prev" type="button" aria-label="Previous image">â€¹</button>
      <button id="imageLightboxNext" class="image-lightbox-nav next" type="button" aria-label="Next image">â€º</button>
      <button id="imageLightboxClose" class="image-lightbox-close" type="button" aria-label="Close">Ã—</button>
      <img id="imageLightboxImg" class="image-lightbox-img" src="" alt="" />
    </div>
  </div>

  <script src="./i18n-demo.js"></script>
  <script>
    const map = {
      navConcept:'nav_concept',navFeatures:'nav_features',navMenu:'nav_menu',navStaff:'nav_staff',navStore:'nav_store',navReserve:'reserve',
      heroReserveLabel:'reserve',ctaReserveLabel:'reserve',heroReserveSub:'reserve_note',ctaReserveSub:'reserve_note',
      heroTag:'hero_tag',heroLead:'hero_lead',conceptTitle:'concept_title',conceptBody:'concept_body',conceptItem1:'concept_item_1',conceptItem2:'concept_item_2',conceptItem3:'concept_item_3',conceptItem4:'concept_item_4',
      featuresTitle:'features_title',f1:'f1',f2:'f2',f3:'f3',f4:'f4',
      galleryTitle:'gallery_title',galleryLead:'gallery_lead',
      galleryCardTitle1:'gallery_card_title_1',galleryCardTitle2:'gallery_card_title_2',galleryCardTitle3:'gallery_card_title_3',galleryCardTitle4:'gallery_card_title_4',
      galleryCap1:'gallery_cap_1',galleryCap2:'gallery_cap_2',galleryCap3:'gallery_cap_3',galleryCap4:'gallery_cap_4',
      menuTitle:'menu_title',menuItemTitle1:'menu_item_title_1',menuItemTitle2:'menu_item_title_2',menuItemTitle3:'menu_item_title_3',menuItemTitle4:'menu_item_title_4',m1:'m1',m2:'m2',m3:'m3',m4:'m4',
      menuPrice1:'menu_price_1',menuPrice2:'menu_price_2',menuPrice3:'menu_price_3',menuPrice4:'menu_price_4',
      menuDetailBtn1:'menu_detail_btn',menuDetailBtn2:'menu_detail_btn',menuDetailBtn3:'menu_detail_btn',menuDetailBtn4:'menu_detail_btn',
      staffTitle:'staff_title',s1Name:'s1_name',s1Role:'s1_role',s1Desc:'s1_desc',s2Name:'s2_name',s2Role:'s2_role',s2Desc:'s2_desc',s3Name:'s3_name',s3Role:'s3_role',s3Desc:'s3_desc',
      storeTitle:'store_title',storeInfoTitle:'store_info_title',storeAddress:'store_address',storeHours:'store_hours',storeAccess:'store_access',storeTel:'store_tel',mapTitle:'map_title',
      ctaTitle:'cta_title',ctaBody:'cta_body',footerAddress:'footer_address',footerCredit:'footer_credit','lang-copy':'lang_copy','w-sub':'welcome_sub','w-line':'welcome_line'
    };
    const LANG_SHORT = { ja:'JP', en:'EN', 'zh-TW':'ç¹ä¸­', es:'ES', ko:'KO' };
    const RESERVE_BASE_URL = 'https://misemaru.cloud/jp/beauty_salon_misemaru_cloud/';
    function applyReserveLinks(lang) {
      const ids = ['navReserve', 'heroReserve', 'ctaReserve'];
      const returnTo = `${location.origin}${location.pathname}`;
      ids.forEach((id) => {
        const el = document.getElementById(id);
        if (!el) return;
        try {
          const u = new URL(RESERVE_BASE_URL);
          u.searchParams.set('lang', lang || 'ja');
          u.searchParams.set('return', returnTo);
          el.href = u.toString();
        } catch (_) {
          el.href = RESERVE_BASE_URL;
        }
      });
    }

    function applyLang(lang) {
      const dict = window.DEMO_I18N || {};
      const t = dict[lang] || dict.ja || {};
      document.documentElement.lang = lang;
      Object.entries(map).forEach(([id, key]) => {
        const el = document.getElementById(id);
        if (!el || !t[key]) return;
        el.textContent = t[key];
      });
      const current = document.getElementById('navLangCurrent');
      if (current) current.textContent = LANG_SHORT[lang] || 'JP';
      document.querySelectorAll('#langGate .lang-btn[data-lang]').forEach((btn) => {
        btn.classList.toggle('is-selecting', btn.dataset.lang === lang);
      });
      applyReserveLinks(lang);
      if (typeof window.refreshTreatmentModalLang === 'function') {
        window.refreshTreatmentModalLang();
      }
    }

    document.querySelectorAll('[data-scroll]').forEach((btn) => {
      btn.addEventListener('click', () => {
        document.getElementById(btn.dataset.scroll)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
        if (window.innerWidth <= 991) {
          topNav.classList.remove('is-mobile-open');
          menuToggle.setAttribute('aria-expanded', 'false');
        }
      });
    });

    // Reveal split:
    // - Section titles appear earlier for scroll confidence.
    // - Section bodies keep the slower premium timing.
    const titleNodes = Array.from(document.querySelectorAll('.section .title'));
    titleNodes.forEach((n) => n.classList.add('will-reveal'));
    const titleIo = new IntersectionObserver((entries, obs) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add('on');
        obs.unobserve(entry.target);
      });
    }, { rootMargin: '0px 0px -6% 0px', threshold: 0.12 });
    titleNodes.forEach((n) => titleIo.observe(n));

    const bodyNodes = [];
    document.querySelectorAll('.section.reveal').forEach((section) => {
      Array.from(section.children).forEach((child) => {
        if (child.classList?.contains('title')) return;
        child.classList?.add('will-reveal');
        bodyNodes.push(child);
      });
    });
    // Non-section reveals (hero / cta) keep delayed reveal behavior.
    document.querySelectorAll('.reveal').forEach((n) => {
      if (n.classList.contains('section')) return;
      n.classList.add('will-reveal');
      bodyNodes.push(n);
    });
    const bodyIo = new IntersectionObserver((entries, obs) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add('on');
        obs.unobserve(entry.target);
      });
    }, { rootMargin: '0px 0px -18% 0px', threshold: 0.34 });
    bodyNodes.forEach((n) => bodyIo.observe(n));

    const topNav = document.getElementById('topNav');
    const menuToggle = document.getElementById('menuToggle');
    const navLangToggle = document.getElementById('navLangToggle');

    menuToggle.addEventListener('click', () => {
      const open = topNav.classList.toggle('is-mobile-open');
      menuToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
    });

    navLangToggle?.addEventListener('click', (e) => {
      e.stopPropagation();
      window.openDemoLanguageGate?.();
      if (window.innerWidth <= 991) {
        topNav.classList.remove('is-mobile-open');
        menuToggle.setAttribute('aria-expanded', 'false');
      }
    });

    document.addEventListener('click', (e) => {
      const insideNav = topNav.contains(e.target);
      if (window.innerWidth <= 991 && topNav.classList.contains('is-mobile-open')) {
        if (!insideNav) {
          topNav.classList.remove('is-mobile-open');
          menuToggle.setAttribute('aria-expanded', 'false');
        }
      }
    });

    (function navAutoHideFx() {
      if (!topNav) return;
      const HIDE_DELAY = 3000;
      let hideTimer = null;
      const clearHideTimer = () => {
        if (!hideTimer) return;
        window.clearTimeout(hideTimer);
        hideTimer = null;
      };
      const showNav = () => {
        topNav.classList.remove('is-hidden');
      };
      const scheduleHide = () => {
        clearHideTimer();
        if (window.scrollY <= 0) return;
        if (topNav.classList.contains('is-mobile-open')) return;
        hideTimer = window.setTimeout(() => {
          if (window.scrollY <= 0) return;
          if (topNav.classList.contains('is-mobile-open')) return;
          topNav.classList.add('is-hidden');
        }, HIDE_DELAY);
      };
      window.addEventListener('scroll', () => {
        showNav();
        if (window.scrollY <= 0) {
          clearHideTimer();
          return;
        }
        scheduleHide();
      }, { passive: true });
      window.addEventListener('touchstart', showNav, { passive: true });
      window.addEventListener('wheel', showNav, { passive: true });
      scheduleHide();
    })();

    // Feature cards: auto sequence 1->4 when section enters viewport.
    (function featureFx() {
      const section = document.getElementById('features');
      const cards = Array.from(section?.querySelectorAll('.feature-item') || []);
      if (!section || !cards.length) return;
      cards.forEach((c) => c.classList.add('fx-hidden'));
      const fx = new IntersectionObserver((entries, obs) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;
          cards.forEach((card, i) => {
            window.setTimeout(() => {
              card.classList.remove('fx-hidden');
              card.classList.add('fx-show');
            }, i * 220);
          });
          obs.unobserve(section);
        });
      }, { rootMargin: '0px 0px -16% 0px', threshold: 0.5 });
      fx.observe(section);
    })();

    // Menu cards: reveal per card on individual scroll position.
    (function menuFx() {
      const cards = Array.from(document.querySelectorAll('#menu .menu-item'));
      if (!cards.length) return;
      cards.forEach((c) => c.classList.add('fx-hidden'));
      let serialDelay = 0;
      const fx = new IntersectionObserver((entries, obs) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;
          const target = entry.target;
          window.setTimeout(() => {
            target.classList.remove('fx-hidden');
            target.classList.add('fx-show');
          }, serialDelay);
          serialDelay += 120;
          obs.unobserve(target);
        });
      }, { rootMargin: '0px 0px -16% 0px', threshold: 0.62 });
      cards.forEach((c) => fx.observe(c));
    })();

    // Staff cards: mobile left/right/left slide in.
    (function staffFx() {
      const cards = Array.from(document.querySelectorAll('#staff .staff-card'));
      if (!cards.length || window.innerWidth > 991) return;
      cards.forEach((card, i) => {
        card.classList.add(i % 2 === 0 ? 'fx-hidden-left' : 'fx-hidden-right');
      });
      const fx = new IntersectionObserver((entries, obs) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;
          entry.target.classList.remove('fx-hidden-left', 'fx-hidden-right');
          entry.target.classList.add('fx-show');
          obs.unobserve(entry.target);
        });
      }, { rootMargin: '0px 0px -16% 0px', threshold: 0.72 });
      cards.forEach((c) => fx.observe(c));
    })();

    const modalLock = (() => {
      let depth = 0;
      let lockedScrollY = 0;
      let touchLastY = 0;
      let touchStartY = 0;
      let touchStartTop = 0;
      let touchStartMax = 0;
      let touchStartArea = null;

      const blockBackdropScroll = (e) => {
        if (!document.body.classList.contains('modal-lock')) return;
        const area = e.target?.closest?.('.modal-scroll-area');
        if (area) {
          if (e.type !== 'touchmove') return;
          const touch = e.touches && e.touches[0];
          if (!touch) return;
          const currentY = touch.clientY;
          const deltaY = currentY - touchLastY;
          const totalDeltaY = currentY - touchStartY;
          touchLastY = currentY;
          const canScroll = area.scrollHeight > area.clientHeight + 1;
          if (!canScroll) {
            e.preventDefault();
            return;
          }
          const startAtTop = touchStartArea === area && touchStartTop <= 1;
          const startAtBottom = touchStartArea === area && touchStartTop >= touchStartMax - 1;
          if ((startAtTop && totalDeltaY > 0) || (startAtBottom && totalDeltaY < 0)) {
            e.preventDefault();
            return;
          }
          const atTop = area.scrollTop <= 1;
          const atBottom = area.scrollTop + area.clientHeight >= area.scrollHeight - 1;
          if ((atTop && deltaY > 0) || (atBottom && deltaY < 0)) {
            e.preventDefault();
          }
          return;
        }
        e.preventDefault();
      };

      const trackTouchStart = (e) => {
        if (!document.body.classList.contains('modal-lock')) return;
        touchStartArea = e.target?.closest?.('.modal-scroll-area') || null;
        if (touchStartArea) {
          touchStartTop = touchStartArea.scrollTop;
          touchStartMax = Math.max(0, touchStartArea.scrollHeight - touchStartArea.clientHeight);
        } else {
          touchStartTop = 0;
          touchStartMax = 0;
        }
        const touch = e.touches && e.touches[0];
        if (!touch) return;
        touchStartY = touch.clientY;
        touchLastY = touch.clientY;
      };

      document.addEventListener('touchstart', trackTouchStart, { passive: true });
      document.addEventListener('touchmove', blockBackdropScroll, { passive: false });
      document.addEventListener('wheel', blockBackdropScroll, { passive: false });

      const lock = () => {
        depth += 1;
        if (depth > 1) return;
        lockedScrollY = window.scrollY || window.pageYOffset || 0;
        document.documentElement.classList.add('modal-lock');
        document.body.classList.add('modal-lock');
        document.body.style.top = `-${lockedScrollY}px`;
      };

      const unlock = () => {
        if (depth <= 0) return;
        depth -= 1;
        if (depth > 0) return;
        const restoreY = Math.abs(parseInt(document.body.style.top || '0', 10)) || lockedScrollY;
        document.documentElement.classList.remove('modal-lock');
        document.body.classList.remove('modal-lock');
        document.body.style.top = '';
        window.scrollTo({ top: restoreY, left: 0, behavior: 'auto' });
      };

      const forceUnlock = () => {
        if (!document.body.classList.contains('modal-lock') && !document.documentElement.classList.contains('modal-lock')) return;
        depth = 1;
        unlock();
      };

      return { lock, unlock, forceUnlock };
    })();

    (function treatmentDetailFx() {
      const modal = document.getElementById('treatmentModal');
      const closeBtn = document.getElementById('treatmentModalClose');
      const kickerEl = document.getElementById('treatmentModalKicker');
      const titleEl = document.getElementById('treatmentModalTitle');
      const catEl = document.getElementById('treatmentModalCategory');
      const imgEl = document.getElementById('treatmentModalImage');
      const introEl = document.getElementById('treatmentModalIntro');
      const bodyEl = document.getElementById('treatmentModalBody');
      if (!modal || !closeBtn || !kickerEl || !titleEl || !catEl || !imgEl || !introEl || !bodyEl) return;
      const allDetails = window.DEMO_TREATMENT_DETAILS || {};
      const allLabels = window.DEMO_TREATMENT_LABELS || {};
      let activeTreatmentKey = null;
      const currentLang = () => document.documentElement.lang || localStorage.getItem('demo_lang') || 'ja';

      const listHtml = (arr) => `<ul>${arr.map((item) => `<li>${item}</li>`).join('')}</ul>`;
      const priceListHtml = (arr) => `<ul class="price-list">${
        arr.map((item) => {
          const [timeRaw, amountRaw] = String(item).split('|');
          const time = (timeRaw || '').trim();
          const amount = (amountRaw || '').trim();
          if (!time || !amount) return `<li>${item}</li>`;
          return `<li><span class="price-time">${time}</span><span class="price-amount">${amount}</span></li>`;
        }).join('')
      }</ul>`;
      const resolveDetail = (key, lang) => {
        const dict = allDetails[lang] || allDetails.ja || {};
        const jaDict = allDetails.ja || {};
        return dict[key] || jaDict[key] || null;
      };
      const resolveLabels = (lang) => {
        return allLabels[lang] || allLabels.ja || { treatments: 'æ–½è¡“å†…å®¹', forWho: 'ã“ã‚“ãªæ–¹ã«', prices: 'æ–™é‡‘' };
      };
      const render = (key) => {
        const lang = currentLang();
        const d = resolveDetail(key, lang);
        if (!d) return;
        const labels = resolveLabels(lang);
        kickerEl.textContent = d.kicker;
        titleEl.textContent = d.title;
        catEl.textContent = d.category;
        imgEl.src = d.image;
        imgEl.alt = d.title;
        introEl.textContent = d.intro;
        bodyEl.innerHTML = `
          <h4>â–  ${labels.treatments}</h4>
          ${listHtml(d.treatments)}
          <h4>â–  ${labels.forWho}</h4>
          ${listHtml(d.forWho)}
          <h4>â–  ${labels.prices}</h4>
          ${priceListHtml(d.prices)}
        `;
      };
      const open = (key) => {
        activeTreatmentKey = key;
        render(key);
        modal.classList.add('is-open');
        modal.setAttribute('aria-hidden', 'false');
        modalLock.lock();
      };
      const close = () => {
        modal.classList.remove('is-open');
        modal.setAttribute('aria-hidden', 'true');
        activeTreatmentKey = null;
        modalLock.unlock();
      };
      window.refreshTreatmentModalLang = () => {
        if (!activeTreatmentKey) return;
        if (!modal.classList.contains('is-open')) return;
        render(activeTreatmentKey);
      };
      document.querySelectorAll('.menu-detail-btn[data-treatment]').forEach((btn) => {
        btn.addEventListener('click', () => open(btn.dataset.treatment));
      });
      closeBtn.addEventListener('click', close);
      modal.addEventListener('click', (e) => {
        if (e.target === modal) close();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('is-open')) close();
      });
    })();

    (function salonLightboxFx() {
      const lightbox = document.getElementById('imageLightbox');
      const closeBtn = document.getElementById('imageLightboxClose');
      const prevBtn = document.getElementById('imageLightboxPrev');
      const nextBtn = document.getElementById('imageLightboxNext');
      const lightboxImg = document.getElementById('imageLightboxImg');
      const lightboxFrame = lightbox?.querySelector('.image-lightbox-frame');
      if (!lightbox || !closeBtn || !prevBtn || !nextBtn || !lightboxImg || !lightboxFrame) return;
      const targets = Array.from(document.querySelectorAll('#salonGallery .menu-item img'));
      let currentIndex = 0;
      let swipeStartX = 0;
      let swipeStartY = 0;
      let swipeTracking = false;
      const showAt = (idx) => {
        if (!targets.length) return;
        currentIndex = (idx + targets.length) % targets.length;
        const img = targets[currentIndex];
        lightboxImg.src = img.currentSrc || img.src;
        lightboxImg.alt = img.alt || '';
      };
      const open = (img) => {
        currentIndex = Math.max(0, targets.indexOf(img));
        showAt(currentIndex);
        lightbox.classList.add('is-open');
        lightbox.setAttribute('aria-hidden', 'false');
        modalLock.lock();
      };
      const close = () => {
        lightbox.classList.remove('is-open');
        lightbox.setAttribute('aria-hidden', 'true');
        modalLock.unlock();
        window.setTimeout(() => { lightboxImg.src = ''; }, 180);
      };
      targets.forEach((img) => img.addEventListener('click', () => open(img)));
      prevBtn.addEventListener('click', (e) => { e.stopPropagation(); showAt(currentIndex - 1); });
      nextBtn.addEventListener('click', (e) => { e.stopPropagation(); showAt(currentIndex + 1); });
      closeBtn.addEventListener('click', close);

      lightboxFrame.addEventListener('touchstart', (e) => {
        if (!lightbox.classList.contains('is-open')) return;
        const t = e.touches && e.touches[0];
        if (!t) return;
        swipeTracking = true;
        swipeStartX = t.clientX;
        swipeStartY = t.clientY;
      }, { passive: true });

      lightboxFrame.addEventListener('touchend', (e) => {
        if (!swipeTracking || !lightbox.classList.contains('is-open')) return;
        const t = e.changedTouches && e.changedTouches[0];
        swipeTracking = false;
        if (!t) return;
        const dx = t.clientX - swipeStartX;
        const dy = t.clientY - swipeStartY;
        const absX = Math.abs(dx);
        const absY = Math.abs(dy);
        if (absX < 36 || absX <= absY * 1.2) return;
        if (dx < 0) showAt(currentIndex + 1);
        if (dx > 0) showAt(currentIndex - 1);
      }, { passive: true });

      lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) close();
      });
      document.addEventListener('keydown', (e) => {
        if (!lightbox.classList.contains('is-open')) return;
        if (e.key === 'Escape') close();
        if (e.key === 'ArrowLeft') showAt(currentIndex - 1);
        if (e.key === 'ArrowRight') showAt(currentIndex + 1);
      });
    })();

    (function heroBgFx() {
      const layerA = document.getElementById('heroBgA');
      const layerB = document.getElementById('heroBgB');
      if (!layerA || !layerB) return;
      const sources = [
        './images/service-optimized/premium-facial.jpg',
        './images/service-optimized/body-treatment.jpg',
        './images/service-optimized/bridal-course.jpg',
        './images/service-optimized/relaxation-therapy.jpg'
      ];
      const paint = (el, url) => {
        el.style.backgroundImage = "linear-gradient(120deg,rgba(7,7,7,.74),rgba(7,7,7,.55)),url('" + url + "')";
      };
      sources.forEach((src) => { const img = new Image(); img.src = src; });
      let currentLayer = layerA;
      let nextLayer = layerB;
      let index = 0;
      paint(currentLayer, sources[index]);
      currentLayer.classList.add('is-visible');
      window.setInterval(() => {
        index = (index + 1) % sources.length;
        paint(nextLayer, sources[index]);
        nextLayer.classList.add('is-visible');
        currentLayer.classList.remove('is-visible');
        const prev = currentLayer;
        currentLayer = nextLayer;
        nextLayer = prev;
      }, 4000);
    })();

    (function boot() {
      const bootMask = document.getElementById('bootMask');
      const welcome = document.getElementById('welcome');
      const gate = document.getElementById('langGate');
      const gateCloseBtn = document.getElementById('langGateClose');
      const lightbox = document.getElementById('imageLightbox');
      const saved = localStorage.getItem('demo_lang');
      const lang = saved || 'ja';
      const url = new URL(location.href);
      const skipByQuery = url.searchParams.get('skipWelcome') === '1';
      const skipBySession = sessionStorage.getItem('skip_demo_welcome') === '1';
      const shouldSkipWelcome = skipByQuery || skipBySession;
      if (skipBySession) sessionStorage.removeItem('skip_demo_welcome');
      applyLang(lang);
      let bootMaskHidden = false;

      // Future transition hook: call this before navigating back to skip welcome once.
      window.skipDemoWelcomeOnce = function () {
        try { sessionStorage.setItem('skip_demo_welcome', '1'); } catch (_) {}
      };
      const hideBootMask = () => {
        if (bootMaskHidden || !bootMask) return;
        bootMaskHidden = true;
        bootMask.classList.add('hide');
        window.setTimeout(() => bootMask.remove(), 340);
      };

      const ensureFontsReady = async (minMs = 0) => {
        const startedAt = performance.now();
        const fontReady = (document.fonts && document.fonts.ready)
          ? Promise.race([document.fonts.ready, new Promise((resolve) => setTimeout(resolve, 2000))])
          : Promise.resolve();
        await fontReady;
        const elapsed = performance.now() - startedAt;
        const remain = Math.max(0, minMs - elapsed);
        if (remain > 0) await new Promise((resolve) => setTimeout(resolve, remain));
        document.documentElement.classList.add('fonts-ready');
      };

      const showLangGate = async (mode = 'initial') => {
        gate.dataset.mode = mode;
        gate.classList.add('is-preparing');
        gate.classList.add('show');
        document.body.classList.add('welcome-lock');
        await ensureFontsReady(mode === 'initial' ? 520 : 0);
        gate.classList.remove('is-preparing');
        hideBootMask();
      };

      const hideLangGate = () => {
        gate.classList.remove('show');
        gate.classList.remove('is-preparing');
        const welcomeOpen = !welcome.classList.contains('hidden');
        if (!welcomeOpen) document.body.classList.remove('welcome-lock');
      };

      window.openDemoLanguageGate = function () {
        showLangGate('switch');
      };

      const releaseLocksIfIdle = () => {
        const gateOpen = gate.classList.contains('show');
        const welcomeOpen = !welcome.classList.contains('hidden');
        const lightboxOpen = !!lightbox && lightbox.classList.contains('is-open');
        const treatmentModalOpen = !!document.getElementById('treatmentModal')?.classList.contains('is-open');
        if (!gateOpen && !welcomeOpen && !lightboxOpen && !treatmentModalOpen) {
          document.body.classList.remove('welcome-lock');
          modalLock.forceUnlock();
        }
      };

      let welcomeStarted = false;
      const playWelcome = async ({ instant = false } = {}) => {
        if (welcomeStarted || shouldSkipWelcome) return;
        welcomeStarted = true;
        welcome.classList.remove('hidden');
        document.body.classList.add('welcome-lock');
        hideBootMask();
        await ensureFontsReady(instant ? 0 : 1000);
        if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
        window.scrollTo({ top: 0, left: 0, behavior: 'auto' });
        requestAnimationFrame(() => welcome.classList.add('play'));
        setTimeout(() => {
          welcome.classList.add('hidden');
          document.body.classList.remove('welcome-lock');
        }, 2720);
      };

      (async () => {
        if (shouldSkipWelcome) {
          await ensureFontsReady(0);
          welcome.classList.add('hidden');
          if (!saved) await showLangGate('initial');
          else hideBootMask();
          return;
        }
        if (saved) {
          await playWelcome();
          return;
        }
        welcome.classList.add('hidden');
        await showLangGate('initial');
      })();

      gateCloseBtn?.addEventListener('click', () => {
        if (gate.dataset.mode === 'initial') return;
        hideLangGate();
      });
      document.addEventListener('keydown', (e) => {
        if (e.key !== 'Escape') return;
        if (!gate.classList.contains('show')) return;
        if (gate.dataset.mode === 'initial') return;
        hideLangGate();
      });

      gate.querySelectorAll('.lang-btn').forEach((btn) => {
        btn.addEventListener('click', async () => {
          const mode = gate.dataset.mode || 'initial';
          const gateButtons = gate.querySelectorAll('.lang-btn');
          gateButtons.forEach((b) => {
            b.disabled = true;
            b.classList.toggle('is-selecting', b === btn);
          });
          const next = btn.dataset.lang;
          localStorage.setItem('demo_lang', next);
          applyLang(next);
          if (mode === 'initial' && !shouldSkipWelcome) {
            await playWelcome({ instant: true });
            hideLangGate();
          } else {
            hideLangGate();
          }
          gateButtons.forEach((b) => { b.disabled = false; });
          releaseLocksIfIdle();
        });
      });

      window.addEventListener('pageshow', releaseLocksIfIdle);
      window.addEventListener('load', releaseLocksIfIdle);
      window.setInterval(releaseLocksIfIdle, 800);
    })();

    // Hard fallback: never leave the page blocked by welcome overlay.
    window.setTimeout(() => {
      document.getElementById('welcome')?.classList.add('hidden');
      document.body.classList.remove('welcome-lock');
      modalLock.forceUnlock();
      const bootMask = document.getElementById('bootMask');
      if (bootMask) {
        bootMask.classList.add('hide');
        window.setTimeout(() => bootMask.remove(), 340);
      }
    }, 12000);

  </script>
</body>
</html>
